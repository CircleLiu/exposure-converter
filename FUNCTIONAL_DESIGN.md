# 相机曝光转换器 - 功能设计文档

## 1. 概述

本文档旨在详细描述一个基于Vue的相机曝光参数计算与转换工具的功能需求。该工具的核心目标是为摄影师提供一个便捷的界面，用于计算曝光值（EV），并根据不同的拍摄需求，查找和转换等效的曝光参数组合（快门速度、光圈、ISO）。

## 2. 核心功能模块

### 2.1. 曝光值 (EV) 计算器

此模块是应用的核心，用于根据用户输入的曝光三要素计算出对应的曝光值。

- **输入参数**:
  - **快门速度 (Shutter Speed)**: 用户可以从下拉列表中选择标准快门速度，也可以手动输入一个特定的值（例如 `1/250` 或 `0.004`）。
  - **光圈 (Aperture)**: 用户可以从下拉列表中选择标准光圈值（例如 `f/1.8`, `f/8`），也可以手动输入。
  - **ISO**: 用户可以从下拉列表中选择标准ISO值（例如 `100`, `1600`），也可以手动输入。
- **输出**:
  - **曝光值 (EV)**: 根据输入的三个参数，系统将实时计算并显示对应的EV值。EV值的计算将基于标准公式 `EV = log₂(A²/T) - log₂(S/100)`，其中 A 是光圈值，T 是快门时间（秒），S 是 ISO 值。

### 2.2. 步进值 (Stop) 设置

为了适应不同相机和镜头的档位设置，用户可以自定义参数的步进间隔。

- **选项**: 提供一个选择器，允许用户选择 `1/3 stop`、`1/2 stop` 或 `1 stop`（整档）作为步进单位。
- **动态可选值**: 当用户切换步进值时，快门速度、光圈和ISO的下拉选择框中的预设值列表会动态更新，以反映所选的步进间隔。
  - 例如，在 `1 stop` 模式下，光圈列表可能为 `f/2.8, f/4, f/5.6`。
  - 切换到 `1/3 stop` 模式后，列表将变为 `f/2.8, f/3.2, f/3.5, f/4, ...`。

### 2.3. 灵活的参数输入

为确保最大的灵活性，所有参数输入框都支持两种输入模式。

- **选择模式**: 用户可以方便地从下拉列表中选择常用的标准值。列表内容由当前的“步进值”设置决定。
- **手动输入模式**: 如果所需的值不在列表中（例如非标准快门速度），用户可以直接在输入框中键入数值。
  - 系统应能解析多种格式，例如：
    - 快门速度: `1/4000`, `0.004`, `30` (秒)。
    - 光圈: `1.4`, `8`, `22`。
    - ISO: `100`, `640`, `12800`。
  - 输入后，系统会立即使用该值重新计算EV。

### 2.4. 等效曝光组合转换器

此模块用于在保持当前EV值不变的前提下，探索不同的曝光参数组合。

- **基准EV**: 转换器使用当前“EV计算器”模块计算出的EV值作为转换基准。
- **转换逻辑**:
  - **完全自动转换**: 系统自动列出一系列与基准EV等效的曝光参数组合。例如，如果当前组合是 `f/8, 1/125s, ISO 100`，系统可能会列出 `f/5.6, 1/250s, ISO 100` 或 `f/8, 1/250s, ISO 200` 等组合。
  - **固定参数转换**: 为了满足特定的创作意图（如控制景深或运动模糊），用户可以选择固定一个或两个参数，系统将计算并展示剩余参数的可能值。

### 2.5. 固定参数的转换模式

这是“等效曝光组合转换器”的高级功能，提供更精确的控制。用户可以在转换器区域为想要固定的一个或两个参数指定具体的目标值。

- **界面**: 在转换器区域，为每个参数（快门、光圈、ISO）提供一个独立的输入/选择框。用户可以将这些框留空（表示该参数不固定），或为其设置一个目标值。
- **模式一：固定一个参数**
  - **场景**: 用户希望在转换时将某个参数固定为特定值。例如，当前计算出的光圈是 `f/2.8`，但用户想看看如果将光圈收缩到 `f/8` 以获得更大景深，快门和ISO会如何组合。
  - **操作**: 用户在转换器区域的光圈输入框中选择或输入 `f/8`。
  - **输出**: 系统将基于“EV计算器”的基准EV和用户在转换器中设定的固定光圈值(`f/8`)，计算并以列表形式展示所有匹配的【快门速度】和【ISO】的组合。
- **模式二：固定两个参数**
  - **场景**: 用户希望精确计算最后一个未知参数。例如，已确定使用 `f/16` 和 `ISO 100` 拍摄风景，需要计算出正确的快门速度。
  - **操作**: 用户在转换器区域的光圈输入框中设置 `f/16`，在ISO输入框中设置 `100`。
  - **输出**: 系统将基于基准EV和固定的两个值，精确计算出第三个参数（快门速度）的值并直接显示。如果计算出的值不是标准档位，也应如实显示（例如 `1/90s`）。

## 3. 界面 (UI) 布局与交互设计

页面可以分为三个主要区域：

1.  **顶部控制区**:
    - 包含“步进值”选择器 (`1/3`, `1/2`, `1 stop`)。
2.  **EV 计算器区**:
    - 并排或垂直排列三个输入/选择框，分别对应【快门速度】、【光圈】和【ISO】。
    - 显著位置实时显示计算出的【EV值】。
3.  **曝光转换器区**:
    - 一个醒目的标题，如“等效曝光组合”。
    - 提供与EV计算器区类似的三个输入/选择框，分别对应【快门速度】、【光圈】和【ISO】，用于设置转换时的固定值。用户可以将它们留空。
    - 下方是一个结果展示区域，用于以表格或列表的形式清晰地展示计算出的等效参数组合。

## 4. 数据模型与公式

- **核心公式**: `EV = log₂(A²/T) - log₂(S/100)`
- **数据结构**:
  - 需要预定义不同步进值下的标准快门、光圈、ISO序列。
  - 例如 `shutter_speeds_full_stop = [..., 1/250, 1/125, 1/60, ...]`
  - `apertures_third_stop = [..., f/2.8, f/3.2, f/3.5, f/4, ...]`

## 5. 非功能性需求

- **响应式设计**: 页面布局应能自适应桌面和移动设备屏幕，方便在不同场景下使用。
- **易用性**: 界面直观，交互清晰，无需阅读说明即可快速上手。
- **性能**: 所有计算都应在客户端实时完成，无网络延迟。
